# 倒计时视频生成器 - 使用指南

## 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发模式
```bash
npm run dev
```

### 构建应用
```bash
# Windows
npm run build:win

# macOS
npm run build:mac

# Linux
npm run build:linux
```

## 界面介绍

应用界面分为左右两部分：

### 左侧 - 预览区域
- **实时预览**：显示当前配置的倒计时效果
- **播放/暂停按钮**：点击可以预览倒计时动画效果

### 右侧 - 配置面板
提供所有倒计时参数的配置选项

## 详细配置说明

### 1. 字体设置

#### 字体选择
- 下拉菜单会列出系统中所有可用的字体
- 菜单中的字体名称会用对应的字体样式显示,方便预览效果
- 选择后立即在左侧预览区域生效

#### 字号大小
- 输入字体大小（单位：像素）
- 范围：12px - 500px
- 建议：根据视频尺寸选择合适的字号,一般 60-120px 效果较好

#### 字体颜色
- 点击颜色选择器选择颜色
- 默认为黑色 (#000000)
- 提示：深色背景建议使用浅色字体,浅色背景建议使用深色字体

#### 文字阴影
- **启用阴影**：勾选"启用阴影"复选框
- **阴影颜色**：选择阴影的颜色(默认黑色)
- **模糊半径**：设置阴影的模糊程度(0-50px,默认5px)
- **X偏移**：设置阴影的水平偏移(-50 到 50px,默认2px)
- **Y偏移**：设置阴影的垂直偏移(-50 到 50px,默认2px)
- 提示：适当的文字阴影可以提升文字在复杂背景上的可读性

### 2. 倒计时格式

#### 格式模式
当前支持"经典格式"模式,可分别配置时、分、秒的显示方式。

倒计时可以分别配置时、分、秒三个部分的显示方式：

#### 小时/分钟/秒显示
每个时间单位都支持以下四种显示模式：
- **自动**：智能显示,自动隐藏前导零(推荐)
  - 例如：`1:30:05` 而不是 `01:30:05`
  - 当该位为0且为最高位时自动隐藏
- **隐藏**：完全不显示该时间单位
- **显示**：显示该单位,不补零
  - 例如：`1:5` 而不是 `01:05`
- **两位数字**：始终显示两位数,不足补0
  - 例如：`01:05`

#### 分隔符
- 自定义时分秒之间的分隔符
- 默认为冒号 ":"
- 可以使用任意字符,如 "：" "·" "-" 等
- 最多 3 个字符

**示例配置**：
- 配置：时-自动,分-自动,秒-两位数字,分隔符":"
- 效果：`1:30:05`, `5:00` (小时为0时自动隐藏)

- 配置：时-隐藏,分-两位数字,秒-两位数字,分隔符":"
- 效果：`01:30`, `00:05`

- 配置：时-两位数字,分-两位数字,秒-两位数字,分隔符":"
- 效果：`00:01:30`, `01:00:05`

### 3. 倒计时时长

#### 总秒数
- 设置倒计时的总时长（单位：秒）
- 范围：1 - 86400 秒（1秒 - 24小时）
- 系统会自动计算并显示对应的时分秒

**常用时长**：
- 10 秒
- 60 秒（1 分钟）
- 300 秒（5 分钟）
- 600 秒（10 分钟）
- 3600 秒（1 小时）

### 4. 背景设置

#### 背景颜色
- 点击颜色选择器选择背景颜色
- 默认为白色 (#ffffff)
- 背景颜色会填充整个画布
- 即使设置了背景图片,颜色仍会显示在图片未覆盖的区域

#### 选择背景图片
1. 点击"选择图片"按钮
2. 在文件选择对话框中选择图片
3. 支持格式：JPG、PNG、GIF、BMP、WebP
4. 图片会以 **contain** 模式显示,保持原始比例,不会变形
5. 图片未覆盖的区域会显示背景颜色

#### 清除背景图片
- 点击"清除"按钮移除背景图片
- 移除后显示默认的深色背景

#### 背景预览
- 选择图片后会在配置面板中显示缩略图预览

**提示**：
- 建议使用高分辨率图片以获得更好的视频质量
- 图片比例最好与预览区域比例一致
- 复杂的背景建议启用文字阴影或调整背景颜色,以确保倒计时文字清晰可读
- 背景颜色和背景图片可以同时使用,形成分层效果

### 5. 位置设置

#### 定位模式

##### 自动居中
- 倒计时文字在预览区域中心显示
- 水平和垂直都完全居中
- 适合大多数场景

##### 自定义位置
需要配置以下参数：

**基准角**：
- 左上角
- 右上角
- 左下角
- 右下角

**X 偏移**：
- 从基准角水平方向的偏移距离（单位：像素）

**Y 偏移**：
- 从基准角垂直方向的偏移距离（单位：像素）

**示例**：
- 基准角：左上角，X偏移：50，Y偏移：50
  → 倒计时显示在距离左上角 50px 的位置

- 基准角：右下角，X偏移：100，Y偏移：100
  → 倒计时显示在距离右下角 100px 的位置

### 6. 视频导出

#### 帧率设置
选择视频的帧率（FPS - Frames Per Second）：
- **6 FPS**：超低帧率,文件极小,适合简单倒计时
- **12 FPS**：低帧率,默认选项,平衡文件大小和流畅度
- **24 FPS**：电影标准,流畅度较好
- **30 FPS**：网络视频常用,流畅度好

**选择建议**：
- 一般用途：12 FPS (默认)
- 追求流畅度：24-30 FPS
- 需要小文件：6 FPS
- 注意：帧率越高,导出时间越长,文件越大

#### 比特率设置
选择视频的比特率（影响视频质量和文件大小）：
- **5 Mbps**：标准质量(默认),文件较小
- **10 Mbps**：中等质量,适合大多数场景
- **20 Mbps**：较好质量,文件较大

**选择建议**：
- 网络分享：5 Mbps
- 一般使用：10 Mbps
- 高质量需求：20 Mbps

#### 导出视频
1. 配置好所有参数
2. 点击底部固定的"导出视频"按钮
3. 选择保存位置和文件名
4. 等待导出完成
5. 导出过程中会显示进度条

**注意事项**：
- 导出时间取决于倒计时时长、帧率和比特率
- 倒计时 60 秒,12 FPS,大约需要 30-60 秒导出
- 导出过程中不要关闭应用
- 导出的视频格式为 MP4（H.264 编码）
- 长视频(600秒以上)导出已优化,防止GPU资源耗尽

## 实用技巧

### 1. 快速预览
在配置时，随时点击"播放"按钮预览效果，确保满意后再导出

### 2. 配置保存
目前配置不会自动保存，建议记录常用配置参数，方便下次使用

### 3. 性能优化
- 较长的倒计时（如 1 小时）会生成较大的视频文件
- 可以考虑分段导出，或降低帧率减小文件大小

### 4. 文字可读性
- 启用文字阴影效果提升可读性
- 浅色背景配深色文字,深色背景配浅色文字
- 复杂背景图片建议增大字号并启用阴影
- 可以调整背景颜色来改善对比度

### 5. 测试导出
首次使用建议先导出一个短时长（如 10 秒）的视频进行测试

### 6. 长视频导出
- 导出长视频（10分钟以上）时请耐心等待
- 程序已优化GPU资源管理,防止崩溃
- 如遇问题,可以尝试降低帧率或比特率

## 常见问题

### Q: 字体列表为空或加载失败
**A**:
- 确保系统中已安装字体
- 重启应用重新加载字体列表
- 某些系统字体可能无法被检测到

### Q: 背景图片显示不正确
**A**:
- 检查图片格式是否支持
- 确保图片文件未损坏
- 尝试使用其他图片

### Q: 导出视频失败
**A**:
- 确保有足够的磁盘空间
- 检查保存路径是否有写入权限
- 尝试减少倒计时时长或降低帧率

### Q: 导出的视频无法播放
**A**:
- MP4 格式需要支持 H.264 编码的播放器
- 推荐使用：VLC、Chrome 浏览器、Windows 10+ 自带播放器、macOS QuickTime
- 几乎所有现代播放器都支持 H.264/MP4 格式

### Q: 导出长视频时程序崩溃
**A**:
- 程序已内置GPU优化,支持导出长视频
- 如仍有问题,尝试降低帧率(如6或12 FPS)
- 降低比特率(如5 Mbps)
- 更新显卡驱动程序
- 详见 troubleshooting.md 文档

### Q: 预览和导出的效果不一致
**A**:
- 这可能是字体渲染的差异
- 尝试使用常见的系统字体（如 Arial、微软雅黑）
- 确保在导出前已完整加载背景图片

## 快捷键

- **F12**: 打开开发者工具（调试用）
- **Ctrl+R / Cmd+R**: 刷新应用

## 技术支持

如遇到问题，可以：
1. 查看开发者控制台（F12）的错误信息
2. 检查应用版本是否为最新
3. 参考技术文档 `docs/technical.md`

## 版本信息

当前版本：1.0.0

### 更新日志
- v1.0.0 (2025-10-02): 首次发布
  - 基础倒计时功能
  - 字体、格式、位置配置
  - 背景图片支持
  - WebM 视频导出
