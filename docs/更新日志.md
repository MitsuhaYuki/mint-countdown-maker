# 更新日志

记录项目的所有重要变更。

---

## [1.0.1] - 2025-10-07

### ✨ 新增功能

#### 配置项 Tooltip 提示系统
- 所有 21 个配置项标签支持鼠标悬停查看说明
- 帮助文本集中管理于 `configHelp.js`
- 无需查看文档即可了解选项用途

#### 混合模式（Blend Mode）
- 文字可根据背景自动调整颜色，增强可读性
- 支持 8 种混合模式：Difference、Exclusion、Hard Light、Soft Light、Overlay、Screen、Color Dodge、Color Burn
- 使用 Canvas `globalCompositeOperation` 实现
- 实时预览和视频导出均支持

#### 纯数字格式模式
- 直接显示剩余总秒数（如"300"而非"5:00"）
- 适合训练计时、冥想等精确计时场景
- 与"经典格式"模式互补

#### 背景图片显示模式
- **Cover（填满）**：图片填满画布，可能裁剪边缘
- **Contain（完整）**：完整显示图片，可能留白
- 默认 Cover 模式
- 留白区域显示背景颜色

#### 背景颜色配置
- 背景颜色选择器（默认白色）
- 与背景图片可同时使用，形成分层效果

#### 文字阴影配置
- 启用/禁用开关
- 可配置颜色、模糊半径、X/Y 偏移
- 显著提升复杂背景上的文字可读性

#### 比特率配置
- 视频比特率选择：5/10/20 Mbps
- 用户可根据需求平衡文件大小和视频质量

### ⚡ 功能优化

#### 倒计时格式简化
- 移除"隐藏"选项
- 保留三种显示方式：自动、显示、两位数字
- "自动"模式智能隐藏前导零
- 简化配置，提升易用性

#### 视频导出系统重构
- 从 WebM 迁移到 MP4 格式（H.264 编码）
- 使用 VideoEncoder API (WebCodecs) 替代 MediaRecorder
- 使用 mp4-muxer 创建标准 MP4 容器
- 更好的兼容性和播放器支持

#### GPU 资源管理优化
- 背压控制：限制编码器队列 ≤5 帧
- 定期让渡：每 100 帧延迟 50ms
- 质量编码模式：latencyMode='quality'
- 支持长视频：测试通过 600 秒以上导出
- 显著降低长视频导出崩溃率

#### 帧率调整
- 默认帧率：30fps → 12fps
- 新增 6fps 选项（超低帧率）
- 移除 60fps 选项
- 可选帧率：6/12/24/30 FPS

#### 渲染性能优化
- 图片缓存：使用 useRef 缓存背景图片
- 避免重复加载，消除预览闪烁
- 背景渲染优化

#### 字体渲染修复
- 自动清理字体名称中的引号
- 避免特殊字体名称导致的渲染错误

### 🎨 UI/UX 改进

#### 样式紧凑化
- 减少内边距和间距
- 字体大小优化：14px → 13px
- 标题大小调整
- 单屏显示更多内容

#### 布局优化
- 删除顶部冗余标题
- 导出按钮固定在底部
- 使用 Flexbox 布局
- 时/分/秒选择器合并到单行
- 样式文件分离

#### 新增 CSS 类
- `.config-content`：可滚动内容区
- `.config-footer`：固定底部区
- `.time-selectors-row`：行内布局

---

## [1.0.0] - 2025-10-02

### ✨ 初始版本

#### 核心功能
- 倒计时视频生成
- 实时预览
- MP4 格式导出

#### 字体配置
- 系统字体选择
- 字号、颜色配置
- 字体列表预览

#### 格式配置
- 经典格式（时:分:秒）
- 自定义分隔符
- 时/分/秒独立配置

#### 背景配置
- 背景图片选择
- 图片预览

#### 位置配置
- 自动居中
- 自定义位置（四角 + 偏移）

#### 导出配置
- 帧率选择（24/30 FPS）
- H.264 编码
- MP4 容器

---

## 版本号说明

本项目遵循[语义化版本](https://semver.org/lang/zh-CN/)：

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

---

## 图例

- ✨ 新增功能
- ⚡ 功能优化
- 🎨 UI/UX 改进
- 🐛 Bug 修复
- 📚 文档更新
- 🔧 配置变更
- ♻️ 代码重构
- 🗑️ 移除功能

---

## 链接

- [项目仓库](https://github.com/MitsuhaYuki/mint-countdown-maker)
- [用户指南](./用户指南.md)
- [开发指南](./开发指南.md)
